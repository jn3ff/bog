#[file(
  owner = "analysis-agent",
  subsystem = "test-fixtures",
  updated = "2026-02-24",
  status = green
)]

#[description {
  Integration tests. Validates config loading, parsing, tree-sitter extraction,
  function validation, skimsystem validation, and dogfood tests that ensure
  bogbot validates itself including its own skimsystem annotations.
}]

#[health(
  test_coverage = green,
  staleness = green
)]

#[fn(test_config_loading) {
  status = green,
  deps = [config::load_config],
  description = "Verifies bogbot.toml parsing"
}]

#[fn(test_repo_bog_parsing) {
  status = green,
  deps = [parser::parse_bog],
  description = "Verifies repo.bog parses correctly"
}]

#[fn(test_file_bog_parsing) {
  status = green,
  deps = [parser::parse_bog],
  description = "Verifies parser.rs.bog parses with all annotation types"
}]

#[fn(test_fixture_bog_parsing) {
  status = green,
  deps = [parser::parse_bog],
  description = "Verifies test fixture .bog file parses"
}]

#[fn(test_treesitter_validates_functions) {
  status = green,
  deps = [treesitter::extract_symbols],
  description = "Verifies tree-sitter extracts function names from fixture"
}]

#[fn(test_validate_functions_match) {
  status = green,
  deps = [validator::validate_syntax, validator::validate_functions],
  description = "Verifies .bog fn annotations match source functions"
}]

#[fn(test_validate_functions_catches_mismatch) {
  status = green,
  deps = [parser::parse_bog, validator::validate_functions],
  description = "Verifies validator catches fn annotations for non-existent functions"
}]

#[fn(test_dogfood_validate) {
  status = green,
  deps = [validator::validate_project],
  description = "Ensures bogbot validates its own .bog annotations"
}]

#[fn(test_dogfood_health) {
  status = green,
  deps = [health::compute_health],
  description = "Ensures health report works on bogbot itself"
}]

#[fn(test_dogfood_skimsystem_declared) {
  status = green,
  deps = [parser::parse_bog],
  description = "Ensures bogbot declares at least one skimsystem"
}]

#[fn(test_dogfood_skim_observations_valid) {
  status = green,
  deps = [validator::validate_project],
  description = "Ensures all skim observations reference valid skimsystems"
}]

#[fn(test_dogfood_skimsystem_health) {
  status = green,
  deps = [health::compute_health],
  description = "Ensures skimsystem health is computed with observations"
}]

#[fn(test_dogfood_every_subsystem_has_files) {
  status = green,
  deps = [health::compute_health],
  description = "Ensures every declared subsystem has annotated files"
}]
